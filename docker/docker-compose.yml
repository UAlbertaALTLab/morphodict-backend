# WARNING: This file is autogenerated by make-yaml. Changes here
# will be overwritten. Edit the corresponding .template file
# instead.

version: "3"

services:
  crkeng:
    restart: always
    # Specify hostname to make it clearer which container is active when
    # using docker to get a shell in the container.
    hostname: crkeng-backend-container
    image: ghcr.io/ualbertaaltlab/api.itwewina.altlab.dev:latest
    command: /app/app.sh crkeng
    ports:
      - "8003:8001" # http
      - "9003:9192" # uWSGI stats
    volumes:
      - "./.env:/app/.env"

      # LFS mounts
      - "../src/morphodict/lexicon/resources/vector_models/:/app/src/morphodict/lexicon/resources/vector_models/:ro"
      - "../src/crkeng/resources/fst:/app/src/crkeng/resources/fst:ro"
      - "../src/crkeng/res/fst/:/app/src/crkeng/res/fst/:ro"
      - "../src/crkeng/res/:/app/src/crkeng/res/:ro"
      - "../src/crkeng/resources/dictionary/:/app/src/crkeng/resources/dictionary/:ro"

      - "/data_local/application-data/crkeng/vector_models:/app/src/crkeng/resources/vector_models/"
      - "/data_local/application-data/crkeng/db:/app/src/crkeng/db/"
      - "/data_local/application-data/crkeng/search_quality:/app/src/crkeng/CreeDictionary/search_quality/"
  cwdeng:
    restart: always
    # Specify hostname to make it clearer which container is active when
    # using docker to get a shell in the container.
    hostname: cwdeng-backend-container
    image: ghcr.io/ualbertaaltlab/api.itwewina.altlab.dev:latest
    command: /app/app.sh cwdeng
    ports:
      - "8005:8001" # http
      - "9005:9192" # uWSGI stats
    volumes:
      - "./.env:/app/.env"

      # LFS mounts
      - "../src/morphodict/lexicon/resources/vector_models/:/app/src/morphodict/lexicon/resources/vector_models/:ro"
      - "../src/cwdeng/resources/fst:/app/src/cwdeng/resources/fst:ro"
      - "../src/cwdeng/res/fst/:/app/src/cwdeng/res/fst/:ro"
      - "../src/cwdeng/res/:/app/src/cwdeng/res/:ro"
      - "../src/cwdeng/resources/dictionary/:/app/src/cwdeng/resources/dictionary/:ro"

      - "/data_local/application-data/cwdeng/vector_models:/app/src/cwdeng/resources/vector_models/"
      - "/data_local/application-data/cwdeng/db:/app/src/cwdeng/db/"
      - "/data_local/application-data/cwdeng/search_quality:/app/src/cwdeng/CreeDictionary/search_quality/"
  srseng:
    restart: always
    # Specify hostname to make it clearer which container is active when
    # using docker to get a shell in the container.
    hostname: srseng-backend-container
    image: ghcr.io/ualbertaaltlab/api.itwewina.altlab.dev:latest
    command: /app/app.sh srseng
    ports:
      - "8009:8001" # http
      - "9009:9192" # uWSGI stats
    volumes:
      - "./.env:/app/.env"

      # LFS mounts
      - "../src/morphodict/lexicon/resources/vector_models/:/app/src/morphodict/lexicon/resources/vector_models/:ro"
      - "../src/srseng/resources/fst:/app/src/srseng/resources/fst:ro"
      - "../src/srseng/res/fst/:/app/src/srseng/res/fst/:ro"
      - "../src/srseng/res/:/app/src/srseng/res/:ro"
      - "../src/srseng/resources/dictionary/:/app/src/srseng/resources/dictionary/:ro"

      - "/data_local/application-data/srseng/vector_models:/app/src/srseng/resources/vector_models/"
      - "/data_local/application-data/srseng/db:/app/src/srseng/db/"
      - "/data_local/application-data/srseng/search_quality:/app/src/srseng/CreeDictionary/search_quality/"
  arpeng:
    restart: always
    # Specify hostname to make it clearer which container is active when
    # using docker to get a shell in the container.
    hostname: arpeng-backend-container
    image: ghcr.io/ualbertaaltlab/api.itwewina.altlab.dev:latest
    command: /app/app.sh arpeng
    ports:
      - "8007:8001" # http
      - "9007:9192" # uWSGI stats
    volumes:
      - "./.env:/app/.env"

      # LFS mounts
      - "../src/morphodict/lexicon/resources/vector_models/:/app/src/morphodict/lexicon/resources/vector_models/:ro"
      - "../src/arpeng/resources/fst:/app/src/arpeng/resources/fst:ro"
      - "../src/arpeng/res/fst/:/app/src/arpeng/res/fst/:ro"
      - "../src/arpeng/res/:/app/src/arpeng/res/:ro"
      - "../src/arpeng/resources/dictionary/:/app/src/arpeng/resources/dictionary/:ro"

      - "/data_local/application-data/arpeng/vector_models:/app/src/arpeng/resources/vector_models/"
      - "/data_local/application-data/arpeng/db:/app/src/arpeng/db/"
      - "/data_local/application-data/arpeng/search_quality:/app/src/arpeng/CreeDictionary/search_quality/"
  hdneng:
    restart: always
    # Specify hostname to make it clearer which container is active when
    # using docker to get a shell in the container.
    hostname: hdneng-backend-container
    image: ghcr.io/ualbertaaltlab/api.itwewina.altlab.dev:latest
    command: /app/app.sh hdneng
    ports:
      - "8010:8001" # http
      - "9010:9192" # uWSGI stats
    volumes:
      - "./.env:/app/.env"

      # LFS mounts
      - "../src/morphodict/lexicon/resources/vector_models/:/app/src/morphodict/lexicon/resources/vector_models/:ro"
      - "../src/hdneng/resources/fst:/app/src/hdneng/resources/fst:ro"
      - "../src/hdneng/res/fst/:/app/src/hdneng/res/fst/:ro"
      - "../src/hdneng/res/:/app/src/hdneng/res/:ro"
      - "../src/hdneng/resources/dictionary/:/app/src/hdneng/resources/dictionary/:ro"

      - "/data_local/application-data/hdneng/vector_models:/app/src/hdneng/resources/vector_models/"
      - "/data_local/application-data/hdneng/db:/app/src/hdneng/db/"
      - "/data_local/application-data/hdneng/search_quality:/app/src/hdneng/CreeDictionary/search_quality/"
